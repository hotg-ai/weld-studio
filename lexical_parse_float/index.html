<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Fast lexical string-to-float conversion routines."><meta name="keywords" content="rust, rustlang, rust-lang, lexical_parse_float"><title>lexical_parse_float - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../lexical_parse_float/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../lexical_parse_float/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate lexical_parse_float</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.8.5</li><li><a id="all-types" href="all.html">All Items</a></li></div></ul><section><div class="block"><ul><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></div></section><div id="sidebar-vars" data-name="lexical_parse_float" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../lexical_parse_float/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">lexical_parse_float</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/lexical_parse_float/lib.rs.html#1-134">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Fast lexical string-to-float conversion routines.</p>
<p>The default implementations are highly optimized both for simple
strings, as well as input with large numbers of digits. In order to
keep performance optimal for simple strings, we avoid overly branching
to minimize the number of branches (and therefore optimization checks).
Most of the branches in the code are resolved at compile-time, and
the resulting ASM as well as comprehensive benchmarks are monitored
to ensure there are no regressions.</p>
<p>For simple floats, we use an optimized digit parser with multiple-digit
optimizations (parsing 8 digits in 3 multiplication instructions),
and then use machine floats to create an exact representation with
high throughput. In more complex cases, we use the Eisel-Lemire
algorithm, described in “Number Parsing at a Gigabyte per Second”,
available online <a href="https://arxiv.org/abs/2101.11408">here</a>. The
Eisel-Lemire algorithm creates an extended representation using a
128-bit (or a fallback 192-bit representation) of the significant
digits of the float, scaled to the proper exponent using pre-computed
powers-of-5.</p>
<p>If the Eisel-Lemire algorithm is unable to unambiguously round the float,
we fallback to using optimized, big-integer algorithms, which are
described in <a href="#algorithm-approach">Algorithm Approach</a> below.</p>
<h2 id="features"><a href="#features">Features</a></h2>
<ul>
<li><code>std</code> - Use the standard library.</li>
<li><code>power-of-two</code> - Add support for parsing power-of-two integer strings.</li>
<li><code>radix</code> - Add support for strings of any radix.</li>
<li><code>format</code> - Add support for parsing custom integer formats.</li>
<li><code>compact</code> - Reduce code size at the cost of performance.</li>
<li><code>safe</code> - Ensure only memory-safe indexing is used.</li>
<li><code>nightly</code> - Enable assembly instructions to control FPU rounding modes.</li>
</ul>
<p><code>safe</code> has a fairly minimal impact, since all parsers are memory-safe
by default except where unsafe functionality can trivially be proven
correct.</p>
<h2 id="note"><a href="#note">Note</a></h2>
<p>Only documented functionality is considered part of the public API:
any of the modules, internal functions, or structs may change
release-to-release without major or minor version changes. Use
internal implementation details at your own risk.</p>
<p>lexical-parse-float mainly exists as an implementation detail for
lexical-core, although its API is stable. If you would like to use
a high-level API that writes to and parses from <code>String</code> and <code>&amp;str</code>,
respectively, please look at <a href="https://crates.io/crates/lexical">lexical</a>
instead. If you would like an API that supports multiple numeric
conversions, please look at <a href="https://crates.io/crates/lexical-core">lexical-core</a>
instead.</p>
<h2 id="machine-float-only-algorithm"><a href="#machine-float-only-algorithm">Machine Float-Only Algorithm</a></h2>
<p>We also support an algorithm that uses only machine floats for the
fast-path algorithm, however, this may be slower for floats with large
exponents since it uses an iterative algorithm. A code sample
using this is:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">lexical_parse_float::Options</span>;
<span class="kw">use</span> <span class="ident">lexical_parse_float::format::STANDARD</span>;
<span class="kw">use</span> <span class="ident">lexical_parse_float::parse::ParseFloat</span>;

<span class="kw">let</span> <span class="ident">options</span> <span class="op">=</span> <span class="ident">Options::new</span>();
<span class="kw">let</span> <span class="ident">result</span> <span class="op">=</span> <span class="ident">f64::fast_path_complete</span>::<span class="op">&lt;</span>{ <span class="ident">STANDARD</span> }<span class="op">&gt;</span>(<span class="string">b&quot;1.34000&quot;</span>, <span class="kw-2">&amp;</span><span class="ident">options</span>);
<span class="macro">assert_eq!</span>(<span class="ident">result</span>, <span class="prelude-val">Ok</span>(<span class="number">1.34000</span>));</code></pre></div>
<h2 id="version-support"><a href="#version-support">Version Support</a></h2>
<p>The minimum, standard, required version is 1.51.0, for const generic
support. Older versions of lexical support older Rust versions.</p>
<h2 id="design"><a href="#design">Design</a></h2>
<ul>
<li><a href="https://github.com/Alexhuszagh/rust-lexical/blob/main/lexical-parse-float/docs/Algorithm.md">Algorithm Approach</a></li>
<li><a href="https://github.com/Alexhuszagh/rust-lexical/blob/main/lexical-parse-float/docs/Benchmarks.md">Benchmarks</a></li>
<li><a href="https://github.com/Alexhuszagh/rust-lexical/blob/main/lexical-parse-float/docs/BigInteger.md">Big Integer Implementation</a></li>
</ul>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="format/index.html" title="lexical_parse_float::format mod">format</a></div><div class="item-right docblock-short"><p>Public API for the number format packed struct.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="options/index.html" title="lexical_parse_float::options mod">options</a></div><div class="item-right docblock-short"><p>Configuration options for parsing floats.</p>
</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.NumberFormatBuilder.html" title="lexical_parse_float::NumberFormatBuilder struct">NumberFormatBuilder</a></div><div class="item-right docblock-short"><p>Build number format from specifications.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Options.html" title="lexical_parse_float::Options struct">Options</a></div><div class="item-right docblock-short"><p>Options to customize parsing floats.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.OptionsBuilder.html" title="lexical_parse_float::OptionsBuilder struct">OptionsBuilder</a></div><div class="item-right docblock-short"><p>Builder for <code>Options</code>.</p>
</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Error.html" title="lexical_parse_float::Error enum">Error</a></div><div class="item-right docblock-short"><p>Error code during parsing, indicating failure type.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.FromLexical.html" title="lexical_parse_float::FromLexical trait">FromLexical</a></div><div class="item-right docblock-short"><p>Trait for numerical types that can be parsed from bytes.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.FromLexicalWithOptions.html" title="lexical_parse_float::FromLexicalWithOptions trait">FromLexicalWithOptions</a></div><div class="item-right docblock-short"><p>Trait for numerical types that can be parsed from bytes with custom options.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ParseOptions.html" title="lexical_parse_float::ParseOptions trait">ParseOptions</a></div><div class="item-right docblock-short"><p>Shared trait for all parser options.</p>
</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Result.html" title="lexical_parse_float::Result type">Result</a></div><div class="item-right docblock-short"><p>A specialized Result type for lexical operations.</p>
</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="lexical_parse_float" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.62.0 (a8314ef7d 2022-06-27)" ></div>
</body></html>